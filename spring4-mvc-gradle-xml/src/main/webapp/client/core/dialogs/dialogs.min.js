		angular.module("dialogs.controllers", [ "ui.bootstrap.modal" ]).controller("errorDialogCtrl",
				[ "$scope", "$modalInstance", "header", "msg", function(o, n, e, a) {
					o.header = angular.isDefined(e) ? e : "Error", o.msg = angular.isDefined(a) ? a : "An unknown error has occurred.", o.close = function() {
						n.close(), o.$destroy()
					}
				} ]).controller(
				"waitDialogCtrl",
				[
						"$scope",
						"$modalInstance",
						"$timeout",
						"header",
						"msg",
						"progress",
						function(o, n, e, a, t, r) {
							o.header = angular.isDefined(a) ? a : "Please Wait...", o.msg = angular.isDefined(t) ? t : "Waiting on operation to complete.",
									o.progress = angular.isDefined(r) ? r : 100, o.$on("dialogs.wait.complete", function() {
										e(function() {
											n.close(), o.$destroy()
										})
									}), o.$on("dialogs.wait.message", function(n, e) {
										o.msg = angular.isDefined(e.msg) ? e.msg : o.msg
									}), o.$on("dialogs.wait.progress", function(n, e) {
										o.msg = angular.isDefined(e.msg) ? e.msg : o.msg, o.progress = angular.isDefined(e.progress) ? e.progress : o.progress
									}), o.getProgress = function() {
										return {
											width : o.progress + "%"
										}
									}
						} ]).controller("notifyDialogCtrl", [ "$scope", "$modalInstance", "header", "msg", function(o, n, e, a) {
			o.header = angular.isDefined(e) ? e : "Notification", o.msg = angular.isDefined(a) ? a : "Unknown application notification.", o.close = function() {
				n.close(), o.$destroy()
			}
		} ]).controller("successDialogCtrl", [ "$scope", "$modalInstance", "header", "msg", function(o, n, e, a) {
			o.header = angular.isDefined(e) ? e : "Notification", o.msg = angular.isDefined(a) ? a : "Unknown application notification.", o.close = function() {
				n.close(), o.$destroy()
			}
		} ]).controller("customDialogCtrl", [ "$scope", "$modalInstance", "header", "msg","yestext","notext", function(o, n, e, a, yestext, notext) {
			o.header = angular.isDefined(e) ? e : "Confirmation", o.msg = angular.isDefined(a) ? a : "Confirmation required.",o.yestext=yestext, o.notext = notext, o.no = function() {
				n.dismiss("no")
			}, o.yes = function() {
				n.close("yes")
			}
		} ]).controller("confirmDialogCtrl", [ "$scope", "$modalInstance", "header", "msg", function(o, n, e, a) {
			o.header = angular.isDefined(e) ? e : "Confirmation", o.msg = angular.isDefined(a) ? a : "Confirmation required.", o.no = function() {
				n.dismiss("no")
			}, o.yes = function() {
				n.close("yes")
			}
		} ]),
		angular.module("dialogs.services", [ "ui.bootstrap.modal", "dialogs.controllers" ]).factory(
				"$dialogs",
				[
						"$modal","$timeout",
						function(o,$timeout) {
							return {
								error : function(n, e) {
									var promise = o.open({
										templateUrl : "/dialogs/error.html",
										controller : "errorDialogCtrl",
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												var errorMessage = angular.copy(e);
												
												return errorMessage;
											}
										}
									})
									
									promise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
									    }, 400);
										
									});	
									
									return{
										result : promise.result
									};
									
								},
								wait : function(n, e, a) {
									return o.open({
										templateUrl : "/dialogs/wait.html",
										controller : "waitDialogCtrl",
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												return angular.copy(e)
											},
											progress : function() {
												return angular.copy(a)
											}
										}
									})
								},
								notify : function(n, e) {
									var promise = o.open({
										templateUrl : "/dialogs/notify.html",
										controller : "notifyDialogCtrl",
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												return angular.copy(e)
											}
										}
									})
									
									promise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
									    }, 400);
										
									});	
									
									return{
										result : promise.result
									};
								},
								confirm : function(n, e) {
									var promise = o.open({
										templateUrl : "/dialogs/confirm.html",
										controller : "confirmDialogCtrl",
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												return angular.copy(e)
											}
										}
									})
									
									promise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
									    }, 400);
										
									});	
									
									return{
										result : promise.result
									};
								},
								custom : function(n, e,yestext,notext) {
									var promise = o.open({
										templateUrl : "/dialogs/custom.html",
										controller : "customDialogCtrl",
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												return angular.copy(e)
											},
											yestext : function() {
												return angular.copy(yestext)
											},
											notext : function() {
													return angular.copy(notext)
											}
										}
									})
									
									promise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
										}, 400);
										
									});	
									
									return{
										result : promise.result
									};
								},
								create : function(n, e, a, t) {
									t = angular.isDefined(t) ? t : {};
									var r = angular.isDefined(t.keyboard) ? t.keyboard : !0, s = angular.isDefined(t.backdrop) ? t.backdrop : !0, l = angular
											.isDefined(t.windowClass) ? t.windowClass : "dialogs-default";
									var promise = o.open({
										templateUrl : n,
										controller : e,
										keyboard : r,
										backdrop : s,
										windowClass : l,
										resolve : {
											data : function() {
												return angular.copy(a)
											}
										}
									})
									
									promise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
									    }, 400);
										
									});	
									
									return{
										result : promise.result
									};
								},
								success : function(n, e) {
									
									var successPromise = o.open({
										templateUrl : "/dialogs/success.html",
										controller : "successDialogCtrl",
										backdrop: true,
										resolve : {
											header : function() {
												return angular.copy(n)
											},
											msg : function() {
												return angular.copy(e)
											}
										}
									});
									
									successPromise.opened.then(function(data){
										$timeout(function() {
											document.getElementById('modalclose').focus();
									    }, 400);
										
									});	
									
									return{
										result : successPromise.result
									};
								}
							}
						} ]),
		angular
				.module("dialogs", [ "dialogs.services", "ngSanitize" ])
				.run(
						[
								"$templateCache",
								function(o) {
											o
													.put(
															"/dialogs/error.html",
															'<div class="modal-header dialog-header-error"><button wait-for="" type="button" class="close" ng-click="close()">&times;</button><h4 class="modal-title text-danger"><span class="glyphicon glyphicon-warning-sign"></span> <span ng-bind-html="header"></span></h4></div><div class="modal-body text-danger" ng-bind="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" id="modalclose" ng-click="close()">Close</button></div>'),
											o
													.put(
															"/dialogs/wait.html",
															'<div class="modal-header dialog-header-wait"><h4 class="modal-title"><span class="glyphicon glyphicon-time"></span> Please Wait</h4></div><div class="modal-body"><p ng-bind-html="msg"></p><div class="progress progress-striped active"><div class="progress-bar progress-bar-info" ng-style="getProgress()"></div><span class="sr-only">{{progress}}% Complete</span></div></div>'),
											o
													.put(
															"/dialogs/notify.html",
															'<div class="modal-header dialog-header-notify"><button wait-for="" type="button" class="close" ng-click="close()" class="pull-right">&times;</button><h4 class="modal-title text-info"><span class="glyphicon glyphicon-info-sign"></span> {{header}}</h4></div><div class="modal-body text-info" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-primary" id="modalclose" ng-click="close()">OK</button></div>'),
											o
													.put(
															"/dialogs/success.html",
															'<div class="modal-header dialog-header-success"><button wait-for="" type="button" class="close" ng-click="close()" class="pull-right">&times;</button><h4 class="modal-title text-info"><span class="glyphicon glyphicon-info-sign"></span> {{header}}</h4></div><div class="modal-body text-info" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-primary" id="modalclose" ng-click="close()">OK</button></div>'),
											o
													.put(
															"/dialogs/confirm.html",
															'<div class="modal-header dialog-header-confirm"><button type="button" wait-for="" class="close" ng-click="no()">&times;</button><h4 class="modal-title"><span class="glyphicon glyphicon-check"></span> {{header}}</h4></div><div class="modal-body" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="yes()" id="modalclose">Yes</button><button type="button" class="btn btn-primary" ng-click="no()">No</button></div>'),
											o
													.put(
															"/dialogs/custom.html",
															'<div class="modal-header dialog-header-confirm"><button type="button" wait-for="" class="close" ng-click="no()">&times;</button><h4 class="modal-title"><span class="glyphicon glyphicon-check"></span> {{header}}</h4></div><div class="modal-body" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="no()">{{notext}}</button><button type="button" class="btn btn-primary" wait-for="" ng-click="yes()" id="modalclose">{{yestext}}</button></div>')
								} ]);